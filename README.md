# Associations between interactive avoidance processes and transdiagnostic mental health symptoms

_Wise, Sookud, Michelini & Mobbs (2023)_

📄 [Preprint]()

----

This repository contains code for our study investigating links between interactive avoidance processes and transdiagnostic mental health symptoms. 

To reproduce the analyses, follow the steps below.

## 💾 Installing the code as a Python package

The custom-written code for the project is contained withing the `./interactive_avoidance` folder, and can be installed as a Python package.

[Clone](https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository#cloning-a-repository) or [download](https://docs.github.com/en/repositories/working-with-files/using-files/downloading-source-code-archives#downloading-source-code-archives) this repository, navigate to the root directory of the repository and run:

```bash
pip install -e .
```

The project specific code is then accessible through the usual import mechanism, e.g.:
    
```python
from interactive_avoidance.models.action_prediction import fit_prediction_models
```

This code is not intended to be used outside of this project as it refers to directories and files that are specific to this project.

### 📓 Running notebooks

You will also need to be able to run [Jupyter notebooks](https://jupyter.org/install) to run the analysis notebooks. One option is to install [JupyterLab](https://jupyter.org/install) using pip:

```bash
pip install jupyterlab
```

## 🗂️ Repository structure

The repository is structured as follows:

```
Repository Structure:
├── data                    # Raw data files
│   ├── questionnaires      # Questionnaire data
│   └── task                # Task data
├── figures                 # Figures generated by the code
├── notebooks               # Jupyter notebooks used for analyses
├── results                 # Processed data and final results
│   ├── questionnaires      # Questionnaire analysis results
│   └── task                # Task results
└── interactive_avoidance   # The package described above
```

The `./figures` directory will be created when running the notebooks, and will contain the figures generated by the code. The `./results` and `./data` directories can be downloaded separately (see below).

## 📥 Downloading data

The `./data` and `./results` directories are not included in the repository due to their size. 

Data and results for the project are stored on the Open Science Framework (OSF) [here](https://osf.io/a7e3k). For convenience, the data can be downloaded using the `download_data.py` script. This script will download and extract the data to the `./data` directory and results to the `./results` directory. It can be run from the command line as follows:

```bash
python download_data.py
```

> **Note:** This will download the original results for all of the analyses and store them in `./results`. These can be overwritten by running the notebooks, which will save the results to the same directory.

## 🔬 Reproducing the analyses

All of the analysis steps are run within Jupyter notebooks. These should be performed in the order given here. 

Notebooks are located within the `./notebooks` directory. All notebooks should be run from the root directory, and will raise an error if this is not the case.

### 1. Questionnaire processing and analysis

**[📓 Questionnaire processing.ipynb](</notebooks/Questionnaire processing.ipynb>)**

We first process the questionniare data, ensuring responses are coded correctly and that we have full datasets for every participant. We also exclude participants who failed attention checks. This is run in the `Questionnaire processing.ipynb` notebook, and the results are stored in the `./results` directory.

### 2. Exploratory factor analysis

**[📓 Factor analysis.ipynb](</notebooks/Factor analysis.ipynb>)**

We then run an exploratory factor analysis on the questionnaire data to identify latent factors. This is performed in the `Factor analysis.ipynb` notebook, and the results are stored in the `./results` directory.

### 3. Prediction analysis

**[📓 Prediction analysis.ipynb](</notebooks/Prediction analysis.ipynb>)**

The `Prediction analysis.ipynb` notebooks runs analyses of subjects' predictions of the predator's movements and preferences.

### 4. Prediction modelling

**[📓 Prediction modelling.ipynb](</notebooks/Prediction modelling.ipynb>)**

We then run computational models of subject's predictions of the predator's movements in the `Prediction modelling.ipynb` notebook. 

